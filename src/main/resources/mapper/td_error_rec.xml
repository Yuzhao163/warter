<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >


<!--namespace中匹配的是dao包所在包的包路径-->
<!--copy路径的时候要选择Copy Reference-->
<mapper namespace="com.water.water.dao.td_error_recDao">
    <!--resultMap中type对用所匹配的实体类,id表示resultMap的标识-->
    <resultMap id="ErrorRecMap" type="com.water.water.pojo.td_error_rec">
        <!--对应数据表的字段信息-->
        <result column="ERDId" property="ERDId" jdbcType="SMALLINT"/>
        <result column="ERId" property="ERId" jdbcType="SMALLINT"/>
        <result column="if_deal" property="if_deal" jdbcType="VARCHAR"/>
        <result column="Time" property="Time" jdbcType="DATE"/>
        <result column="TmnID" property="TmnID" jdbcType="VARCHAR"/>
    </resultMap>

    <!--对应的sql语句-->
    <select id="getAllError" resultMap="ErrorRecMap">
        select * from td_error_rec;
    </select>

    <update id="updateError">
        update td_errordeal_rec set Exception=#{Exception},Result=#{Result} where TmnId=#{TmnId};
    </update>

    <select id="getErrorByTmnId" resultMap="ErrorRecMap">
        select * from td_error_rec ORDER BY if_deal desc where TmnId = #{TmnId};
    </select>

    <select id = "getCountErrorMessage" resultType="integer">
        select COUNT(*) from td_error_rec;
    </select>

    <select id="getSelectMessageByPage" resultMap="ErrorRecMap">
        select * from td_error_rec ORDER BY if_deal asc
        <if test="page!=null and size!=null">
            limit #{page},#{size}
        </if>
    </select>
</mapper>